<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ì¡°ì› ê¸°ì—¬ë„ í‰ê°€</title>
  <style>
  * {
    box-sizing: border-box;
  }

  body {
    margin: 0;
    padding: 0;
    font-family: sans-serif;
    font-size: 18px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center; /* ğŸ”¥ ìˆ˜ì§ ì¤‘ì•™ ì •ë ¬ */
    height: 100vh;           /* ğŸ”¥ ë·°í¬íŠ¸ ë†’ì´ë§Œí¼ */
    text-align: center;
    background-color: #f8f8f8;
  }

  h2 {
    margin-bottom: 20px;
    font-size: 24px;
  }

  select, input {
    margin: 10px 0;
    font-size: 18px;
    padding: 10px;
    width: 80%;
    max-width: 300px;
  }

  .member-score {
    margin-bottom: 15px;
  }

  button {
    font-size: 18px;
    padding: 10px 20px;
    margin-top: 20px;
    cursor: pointer;
  }
</style>
</head>
<body>
  <h2>ì¡°ì› ê¸°ì—¬ë„ í‰ê°€</h2>

  <label for="teamSelect">ì¡° ì„ íƒ: </label>
  <select id="teamSelect" onchange="loadMembers()">
    <option value="">-- ì¡° ì„ íƒ --</option>
  </select>

  <br/>

  <label for="myName">ì´ë¦„: </label>
  <select id="myName" onchange="loadTeammates()" disabled>
    <option value="">-- ì´ë¦„ ì„ íƒ --</option>
  </select>

  <div id="scoreInputs"></div>
  <button onclick="submitScores()">ì œì¶œ</button>

  <script>
    const teams = {
      "1ì¡°": ["ë°•ì„œì§„", "ê¶Œì§€ë¯¼", "í™ì„±í˜„", "ê¹€ë¯¼í˜•", "ì „ìš”ì„­"],
      "2ì¡°": ["ã…‚ã…‚ã…‚", "ã…ˆã…ˆã…ˆ", "ã„·ã„·ã„·", "ã„±ã„±ã„±"],
      "3ì¡°": ["ã……ã……ã……", "ã…ã…ã…", "ã„´ã„´ã„´", "ã…‡ã…‡ã…‡"],
      "4ì¡°": ["ã…‹ã…‹ã…‹", "ã„¹ã„¹ã„¹", "ã…ã…ã…", "ã…Œã…Œã…Œ"]
    };

    window.onload = function() {
      const teamSelect = document.getElementById('teamSelect');
      Object.keys(teams).forEach(teamName => {
        const option = document.createElement('option');
        option.value = teamName;
        option.textContent = teamName;
        teamSelect.appendChild(option);
      });
    };

    function loadMembers() {
      const teamSelect = document.getElementById("teamSelect");
      const myNameSelect = document.getElementById("myName");
      const selectedTeam = teamSelect.value;

      myNameSelect.innerHTML = '<option value="">-- ì´ë¦„ ì„ íƒ --</option>';
      document.getElementById("scoreInputs").innerHTML = "";

      if (selectedTeam && teams[selectedTeam]) {
        teams[selectedTeam].forEach(name => {
          const option = document.createElement("option");
          option.value = name;
          option.textContent = name;
          myNameSelect.appendChild(option);
        });
        myNameSelect.disabled = false;
      } else {
        myNameSelect.disabled = true;
      }
    }

    function loadTeammates() {
      const myName = document.getElementById("myName").value;
      const team = document.getElementById("teamSelect").value;
      const container = document.getElementById("scoreInputs");

      container.innerHTML = "";

      if (!myName) return;

      const teammates = teams[team].filter(name => name !== myName);

      teammates.forEach(member => {
        const div = document.createElement("div");
        div.className = "member-score";
        div.innerHTML = `
          <label>${member}: </label>
          <input type="number" name="${member}" min="0" max="100" required> ì 
        `;
        container.appendChild(div);
      });
    }

    function submitScores() {
      const team = document.getElementById('teamSelect').value;
      const myName = document.getElementById('myName').value;
      if (!team) {
        alert('ì¡°ë¥¼ ì„ íƒí•´ ì£¼ì„¸ìš”');
        return;
      }
      if (!myName) {
        alert('ì´ë¦„ì„ ì„ íƒí•´ ì£¼ì„¸ìš”');
        return;
      }

      const inputs = document.querySelectorAll('#scoreInputs input');
      let scores = {};
      for (let input of inputs) {
        if (!input.value) {
          alert('ëª¨ë“  ì¡°ì› ê¸°ì—¬ë„ ì ìˆ˜ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”');
          return;
        }
        scores[input.name] = Number(input.value);
      }

      fetch('https://script.google.com/macros/s/AKfycbzm6cwQOKABooFoxGBoF3SLkNQNkcauFLPu33H7NJAaQSZn1O_RhuqNnxvCLCP8kn4k/exec', {
        method: 'POST',
        body: JSON.stringify({ team: team, name: myName, scores: scores }),
        headers: { 'Content-Type': 'application/json' }
      })
      .then(res => res.text())
      .then(text => alert('ì œì¶œ ì™„ë£Œ: ' + text))
      .catch(err => alert('ì „ì†¡ ì˜¤ë¥˜: ' + err));
    }
  </script>
</body>
</html>
